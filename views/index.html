{{extend './_layouts/home.html'}}

{{block 'title'}}{{'多人博客'}}{{/block}}

<!-- 自己填坑的部分 -->
{{block 'body'}}
<section class="container">
  <!-- 中间主体 -->
  <ul class="media-list">
    {{each topics}}
    <li class="media">
      <div class="media-left">
        <a href="#">
          <img width="40" height="40" class="media-object" src="../public/img/avatar-max-img.png" alt="...">
        </a>
      </div>
      <div class="media-body">
        <h4 class="media-heading"><a href="/topics/{{@$value._id}}">{{$value.title}}</a></h4>
        <p>sueysok 回复了问题 • 2 人关注 • 1 个回复 • 187 次浏览 • {{$value.add_time | getDate }}</p>
      </div>
    </li>
    {{/each}}
  </ul>

  <!-- 翻页区域 -->
  <nav aria-label="Page navigation">
    <ul class="pagination">
      <li>
        <a href="/?page=1" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      {{if page-3>1}}
      <li>
        <a>...</a>
      </li>
      {{/if}}

      <% 
      var i =3;
      while(i >= 1){
        if (page-i>=1) {%>
      <li><a href='/?page=<%=page-i%>'><%=page-i%></a></li>
      <%}
      i--
      }
      %>
      <li class="active"><a href='/?page=<%=page%>'><%=page%></a></li>

      <% 
      
      var i =1;
      while(i <= 3){
        if (page+i<=pageCount) {%>
      <li><a href="/?page=<%=page+i%>"><%=page+i%></a></li>
      <%}
      i++
      }
      %>

      {{if page+3 < pageCount}}
      <li>
        <a>...</a>
      </li>
      {{/if}}
      <li>
        <a href='/?page={{pageCount}}' aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
</section>
{{/block}}